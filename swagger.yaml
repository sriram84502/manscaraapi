openapi: 3.0.3
info:
  title: Manscara API
  description: API documentation for the Manscara e-commerce platform
  version: 1.0.0
  contact:
    name: Manscara API Support
    email: support@manscara.com

servers:
  - url: http://localhost:5050/api
    description: Local development server
  - url: https://api.manscara.com/api
    description: Production server

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Users
    description: User profile and address management
  - name: Products
    description: Product catalog management
  - name: Cart
    description: Shopping cart operations
  - name: Orders
    description: Order placement and management
  - name: Payments
    description: Payment processing
  - name: Coupons
    description: Coupon validation and management
  - name: Reviews
    description: Product reviews
  - name: Admin
    description: Administrative operations
  - name: Admin Users
    description: User management by administrators

paths:
  # Authentication Routes
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
        '400':
          description: Bad request
        '500':
          description: Internal server error

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Invalid credentials
        '500':
          description: Internal server error

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout user
      responses:
        '200':
          description: Logged out successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/send-otp:
    post:
      tags:
        - Authentication
      summary: Send password reset OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendOTPRequest'
      responses:
        '200':
          description: OTP sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: User not found
        '500':
          description: Internal server error

  /auth/reset-password:
    post:
      tags:
        - Authentication
      summary: Reset password with OTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid or expired OTP
        '500':
          description: Internal server error

  # User Profile Routes
  /users/profile:
    get:
      tags:
        - Users
      summary: Get user profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '500':
          description: Internal server error

    put:
      tags:
        - Users
      summary: Update user profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateProfileResponse'
        '404':
          description: User not found
        '500':
          description: Internal server error

  # Address Routes
  /users/addresses:
    get:
      tags:
        - Users
      summary: Get all user addresses
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Addresses retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAddressesResponse'
        '500':
          description: Internal server error

    post:
      tags:
        - Users
      summary: Add new address
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddAddressRequest'
      responses:
        '201':
          description: Address added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddAddressResponse'
        '400':
          description: Bad request
        '500':
          description: Internal server error

  /users/addresses/{id}:
    put:
      tags:
        - Users
      summary: Update address
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAddressRequest'
      responses:
        '200':
          description: Address updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateAddressResponse'
        '404':
          description: Address not found
        '400':
          description: Bad request
        '500':
          description: Internal server error

    delete:
      tags:
        - Users
      summary: Delete address
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Address deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: Address not found
        '400':
          description: Bad request
        '500':
          description: Internal server error

  /users/addresses/{id}/set-primary:
    put:
      tags:
        - Users
      summary: Set address as primary
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Address set as primary successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: Address not found
        '400':
          description: Bad request
        '500':
          description: Internal server error

  # Product Routes
  /products:
    get:
      tags:
        - Products
      summary: Get all products with filtering and pagination
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
        - name: sort
          in: query
          schema:
            type: string
            enum: [price_asc, price_desc, newest]
        - name: skinType
          in: query
          schema:
            type: string
        - name: query
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Products retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAllProductsResponse'
        '500':
          description: Internal server error

    post:
      tags:
        - Products
      summary: Create a new product (Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProductRequest'
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateProductResponse'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /products/{id}:
    get:
      tags:
        - Products
      summary: Get product by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetProductResponse'
        '404':
          description: Product not found
        '500':
          description: Internal server error

    put:
      tags:
        - Products
      summary: Update product (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProductRequest'
      responses:
        '200':
          description: Product updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateProductResponse'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Product not found
        '500':
          description: Internal server error

    delete:
      tags:
        - Products
      summary: Delete product (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Product not found
        '500':
          description: Internal server error

  # Cart Routes
  /cart:
    get:
      tags:
        - Cart
      summary: Get user's cart
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Cart retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCartResponse'
        '500':
          description: Internal server error

    delete:
      tags:
        - Cart
      summary: Clear cart
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Cart cleared successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClearCartResponse'
        '500':
          description: Internal server error

  /cart/items:
    post:
      tags:
        - Cart
      summary: Add item to cart
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddToCartRequest'
      responses:
        '200':
          description: Item added to cart successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddToCartResponse'
        '404':
          description: Product not found
        '500':
          description: Internal server error

  /cart/items/{productId}:
    put:
      tags:
        - Cart
      summary: Update cart item quantity
      security:
        - bearerAuth: []
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCartItemRequest'
      responses:
        '200':
          description: Cart item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCartItemResponse'
        '404':
          description: Item not found in cart
        '500':
          description: Internal server error

    delete:
      tags:
        - Cart
      summary: Remove item from cart
      security:
        - bearerAuth: []
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Item removed from cart successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveFromCartResponse'
        '500':
          description: Internal server error

  # Order Routes
  /orders:
    post:
      tags:
        - Orders
      summary: Create a new order
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '201':
          description: Order created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
        '400':
          description: Bad request
        '500':
          description: Internal server error

    get:
      tags:
        - Orders
      summary: Get all user orders
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Orders retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserOrdersResponse'
        '500':
          description: Internal server error

  /orders/{id}:
    get:
      tags:
        - Orders
      summary: Get order by ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Order retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderResponse'
        '404':
          description: Order not found
        '500':
          description: Internal server error

  /orders/admin/all:
    get:
      tags:
        - Orders
      summary: Get all orders (Admin only)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: All orders retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAllOrdersResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /orders/admin/{id}:
    get:
      tags:
        - Orders
      summary: Get order details by ID (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Order details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderDetailsResponse'
        '404':
          description: Order not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /orders/{id}/invoice:
    get:
      tags:
        - Orders
      summary: Download order invoice (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invoice downloaded successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '404':
          description: Order not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /orders/{id}/status:
    put:
      tags:
        - Orders
      summary: Update order status (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrderStatusRequest'
      responses:
        '200':
          description: Order status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateOrderStatusResponse'
        '404':
          description: Order not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  # Payment Routes
  /payment/razorpay/create-order:
    post:
      tags:
        - Payments
      summary: Create Razorpay order
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRazorpayOrderRequest'
      responses:
        '200':
          description: Razorpay order created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateRazorpayOrderResponse'
        '500':
          description: Internal server error

  /payment/razorpay/verify:
    post:
      tags:
        - Payments
      summary: Verify Razorpay payment
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyPaymentRequest'
      responses:
        '200':
          description: Payment verified successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyPaymentResponse'
        '400':
          description: Invalid signature
        '500':
          description: Internal server error

  # Coupon Routes
  /coupons/validate:
    post:
      tags:
        - Coupons
      summary: Validate coupon
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateCouponRequest'
      responses:
        '200':
          description: Coupon validated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidateCouponResponse'
        '400':
          description: Invalid coupon
        '404':
          description: Coupon not found
        '500':
          description: Internal server error

  /coupons:
    get:
      tags:
        - Coupons
      summary: Get all available coupons
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Coupons retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCouponsResponse'
        '500':
          description: Internal server error

    post:
      tags:
        - Coupons
      summary: Create new coupon (Admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCouponRequest'
      responses:
        '201':
          description: Coupon created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCouponResponse'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /coupons/{id}:
    put:
      tags:
        - Coupons
      summary: Update coupon (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCouponRequest'
      responses:
        '200':
          description: Coupon updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCouponResponse'
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

    delete:
      tags:
        - Coupons
      summary: Delete coupon (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Coupon deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  # Review Routes
  /reviews:
    post:
      tags:
        - Reviews
      summary: Add a review
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddReviewRequest'
      responses:
        '201':
          description: Review added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddReviewResponse'
        '400':
          description: Already reviewed or bad request
        '500':
          description: Internal server error

    get:
      tags:
        - Reviews
      summary: Get all reviews
      responses:
        '200':
          description: Reviews retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetReviewsResponse'
        '500':
          description: Internal server error

  /reviews/{id}:
    delete:
      tags:
        - Reviews
      summary: Delete a review (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Review deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  # Admin Routes
  /admin/overview:
    get:
      tags:
        - Admin
      summary: Get admin dashboard statistics
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Dashboard stats retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminOverviewResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  # Admin User Routes
  /admin/users:
    get:
      tags:
        - Admin Users
      summary: Get all users (Admin only)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAllUsersResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /admin/users/{id}:
    get:
      tags:
        - Admin Users
      summary: Get user by ID (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserResponse'
        '404':
          description: User not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

    put:
      tags:
        - Admin Users
      summary: Update user (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateUserResponse'
        '404':
          description: User not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

    delete:
      tags:
        - Admin Users
      summary: Delete user (Admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: User not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Request Schemas
    RegisterRequest:
      type: object
      required:
        - firstName
        - lastName
        - email
        - password
        - phone
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 6
        phone:
          type: string
        profilePicture:
          type: string

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string

    SendOTPRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email

    ResetPasswordRequest:
      type: object
      required:
        - email
        - otp
        - newPassword
      properties:
        email:
          type: string
          format: email
        otp:
          type: string
        newPassword:
          type: string
          minLength: 6

    UpdateProfileRequest:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
        profilePicture:
          type: string
        password:
          type: string
          minLength: 6

    AddAddressRequest:
      type: object
      required:
        - name
        - street
        - city
        - state
        - zipCode
        - country
        - phone
      properties:
        name:
          type: string
        street:
          type: string
        city:
          type: string
        state:
          type: string
        zipCode:
          type: string
        country:
          type: string
        phone:
          type: string
        isPrimary:
          type: boolean

    UpdateAddressRequest:
      type: object
      properties:
        name:
          type: string
        street:
          type: string
        city:
          type: string
        state:
          type: string
        zipCode:
          type: string
        country:
          type: string
        phone:
          type: string
        isPrimary:
          type: boolean

    CreateProductRequest:
      type: object
      required:
        - name
        - price
      properties:
        name:
          type: string
        subtitle:
          type: string
        description:
          type: string
        price:
          type: number
          minimum: 0
        discountPrice:
          type: number
          minimum: 0
        volume:
          type: string
        stock:
          type: number
          minimum: 0
        images:
          type: array
          items:
            type: string
        skinType:
          type: array
          items:
            type: string
        ingredients:
          type: array
          items:
            type: string
        advantages:
          type: array
          items:
            type: string
        uses:
          type: array
          items:
            type: string
        category:
          type: string

    UpdateProductRequest:
      type: object
      properties:
        name:
          type: string
        subtitle:
          type: string
        description:
          type: string
        price:
          type: number
          minimum: 0
        discountPrice:
          type: number
          minimum: 0
        volume:
          type: string
        stock:
          type: number
          minimum: 0
        images:
          type: array
          items:
            type: string
        skinType:
          type: array
          items:
            type: string
        ingredients:
          type: array
          items:
            type: string
        advantages:
          type: array
          items:
            type: string
        uses:
          type: array
          items:
            type: string
        category:
          type: string

    AddToCartRequest:
      type: object
      required:
        - productId
        - quantity
      properties:
        productId:
          type: string
        quantity:
          type: integer
          minimum: 1

    UpdateCartItemRequest:
      type: object
      required:
        - quantity
      properties:
        quantity:
          type: integer
          minimum: 0

    CreateOrderRequest:
      type: object
      required:
        - shippingAddress
        - paymentMethod
      properties:
        shippingAddress:
          $ref: '#/components/schemas/ShippingAddress'
        saveShippingAddress:
          type: boolean
        couponCode:
          type: string
        paymentMethod:
          $ref: '#/components/schemas/PaymentMethod'

    ShippingAddress:
      type: object
      required:
        - firstName
        - lastName
        - address
        - city
        - region
        - postalCode
        - country
        - phone
      properties:
        firstName:
          type: string
        lastName:
          type: string
        address:
          type: string
        city:
          type: string
        region:
          type: string
        postalCode:
          type: string
        country:
          type: string
        phone:
          type: string

    PaymentMethod:
      type: object
      properties:
        razorpayPaymentId:
          type: string
        nameOnCard:
          type: string
        cardNumber:
          type: string
        expiryDate:
          type: string

    UpdateOrderStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [Pending, Processing, Shipped, Delivered, Cancelled]
        trackingUrl:
          type: string

    CreateRazorpayOrderRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
        currency:
          type: string
          default: INR
        receipt:
          type: string

    VerifyPaymentRequest:
      type: object
      required:
        - razorpay_order_id
        - razorpay_payment_id
        - razorpay_signature
      properties:
        razorpay_order_id:
          type: string
        razorpay_payment_id:
          type: string
        razorpay_signature:
          type: string

    ValidateCouponRequest:
      type: object
      required:
        - code
        - subtotal
      properties:
        code:
          type: string
        subtotal:
          type: number

    AddReviewRequest:
      type: object
      required:
        - productId
        - rating
        - comment
      properties:
        productId:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string

    CreateCouponRequest:
      type: object
      required:
        - code
        - discountPercentage
        - expiryDate
      properties:
        code:
          type: string
        description:
          type: string
        discountPercentage:
          type: number
        minimumPurchase:
          type: number
        expiryDate:
          type: string
          format: date
        isActive:
          type: boolean
        isOneTimeUse:
          type: boolean

    UpdateCouponRequest:
      type: object
      properties:
        code:
          type: string
        description:
          type: string
        discountPercentage:
          type: number
        minimumPurchase:
          type: number
        expiryDate:
          type: string
          format: date
        isActive:
          type: boolean
        isOneTimeUse:
          type: boolean

    UpdateUserRequest:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        isAdmin:
          type: boolean

    # Response Schemas
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string

    RegisterResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            email:
              type: string
              format: email
            token:
              type: string

    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
          properties:
            user:
              type: object
              properties:
                id:
                  type: string
                firstName:
                  type: string
                lastName:
                  type: string
                email:
                  type: string
                  format: email
            token:
              type: string

    UserProfileResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/User'

    UpdateProfileResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            email:
              type: string
              format: email
            phone:
              type: string
            profilePicture:
              type: string

    GetAddressesResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Address'

    AddAddressResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Address'

    UpdateAddressResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Address'

    GetAllProductsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            products:
              type: array
              items:
                $ref: '#/components/schemas/Product'
            pagination:
              type: object
              properties:
                total:
                  type: integer
                page:
                  type: integer
                limit:
                  type: integer
                pages:
                  type: integer

    GetProductResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/Product'

    CreateProductResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Product'

    UpdateProductResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Product'

    GetCartResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/Cart'

    AddToCartResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Cart'

    UpdateCartItemResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Cart'

    RemoveFromCartResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Cart'

    ClearCartResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Cart'

    CreateOrderResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Order'

    GetUserOrdersResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Order'

    GetOrderResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/Order'

    GetAllOrdersResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Order'

    GetOrderDetailsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/Order'

    UpdateOrderStatusResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
          properties:
            order:
              $ref: '#/components/schemas/Order'
            whatsappLink:
              type: string

    CreateRazorpayOrderResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            id:
              type: string
            amount:
              type: integer
            currency:
              type: string
            receipt:
              type: string
            key:
              type: string

    VerifyPaymentResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string

    ValidateCouponResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            valid:
              type: boolean
            coupon:
              type: object
              properties:
                code:
                  type: string
                discountPercentage:
                  type: number
                description:
                  type: string
                minimumPurchase:
                  type: number
            discountAmount:
              type: number
            message:
              type: string

    GetCouponsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Coupon'

    CreateCouponResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Coupon'

    UpdateCouponResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Coupon'

    AddReviewResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          $ref: '#/components/schemas/Review'

    GetReviewsResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Review'

    AdminOverviewResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            totalOrders:
              type: integer
            totalRevenue:
              type: number
            ordersByStatus:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: string
                  count:
                    type: integer
            monthlySales:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: object
                    properties:
                      year:
                        type: integer
                      month:
                        type: integer
                  total:
                    type: number
                  count:
                    type: integer
            totalUsers:
              type: integer

    GetAllUsersResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/User'

    GetUserResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          $ref: '#/components/schemas/User'

    UpdateUserResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
            firstName:
              type: string
            lastName:
              type: string
            email:
              type: string
              format: email
            phone:
              type: string
            isAdmin:
              type: boolean

    # Model Schemas
    User:
      type: object
      properties:
        _id:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        profilePicture:
          type: string
        isAdmin:
          type: boolean
        addresses:
          type: array
          items:
            $ref: '#/components/schemas/Address'
        cart:
          $ref: '#/components/schemas/Cart'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Address:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        street:
          type: string
        city:
          type: string
        state:
          type: string
        zipCode:
          type: string
        country:
          type: string
        phone:
          type: string
        isPrimary:
          type: boolean

    Product:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        subtitle:
          type: string
        description:
          type: string
        price:
          type: number
        discountPrice:
          type: number
        volume:
          type: string
        stock:
          type: integer
        images:
          type: array
          items:
            type: string
        skinType:
          type: array
          items:
            type: string
        ingredients:
          type: array
          items:
            type: string
        advantages:
          type: array
          items:
            type: string
        uses:
          type: array
          items:
            type: string
        category:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Cart:
      type: object
      properties:
        items:
          type: array
          items:
            type: object
            properties:
              productId:
                type: string
              name:
                type: string
              subtitle:
                type: string
              image:
                type: string
              price:
                type: number
              quantity:
                type: integer
        subtotal:
          type: number
        itemCount:
          type: integer

    Order:
      type: object
      properties:
        _id:
          type: string
        user:
          type: string
        items:
          type: array
          items:
            type: object
            properties:
              productId:
                type: string
              name:
                type: string
              subtitle:
                type: string
              price:
                type: number
              quantity:
                type: integer
              image:
                type: string
        shippingAddress:
          $ref: '#/components/schemas/ShippingAddress'
        paymentMethod:
          $ref: '#/components/schemas/PaymentMethod'
        status:
          type: string
          enum: [Pending, Processing, Shipped, Delivered, Cancelled]
        total:
          type: number
        subtotal:
          type: number
        tax:
          type: number
        shippingCost:
          type: number
        discountAmount:
          type: number
        couponCode:
          type: string
        trackingNumber:
          type: string
        trackingUrl:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Coupon:
      type: object
      properties:
        _id:
          type: string
        code:
          type: string
        description:
          type: string
        discountPercentage:
          type: number
        minimumPurchase:
          type: number
        expiryDate:
          type: string
          format: date-time
        isActive:
          type: boolean
        isOneTimeUse:
          type: boolean
        usedBy:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Review:
      type: object
      properties:
        _id:
          type: string
        product:
          type: string
        user:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time